<!DOCTYPE html><html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Adding interactivity to your Flutter app  - Flutter 中文文档 - Flutter 社区中文资源 </title>
  <link rel="shortcut icon" href="/images/favicon.png">

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-ND4LWWZ');</script>
  <!-- End Google Tag Manager -->

  
  <meta name="description" content="">
  <meta name="keywords" content=" ">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@flutterdev">

  <meta property="og:title" content="Adding interactivity to your Flutter app">
  <meta property="og:url" content="https://flutter.dev/docs/development/ui/interactive">
  <meta property="og:description" content="">
  
  <meta property="og:image" content="https://flutter.dev/images/flutter-logo-sharing.png">

  <link href="/assets/translator/css/material-roboto.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/assets/main-74a0c308218334fcd85291a957a514973015ea8e4eb76b9abae6e14bb5012f5e.css">
  
  <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
  <script src="/assets/main-d6b8b8d26e7b4122b3ddf6a5201966d6e2494aaffadaafaf7c571ce5e2fe0aab.js" type="text/javascript"></script>
  <link rel="stylesheet" href="/assets/translator/css/github.min.css">
<link rel="stylesheet" href="/assets/translator/css/diff2html.min.css">
<script src="/assets/translator/js/diff2html.min.js"></script>
<script src="/assets/translator/js/diff2html-ui.min.js"></script>
<script src="/assets/translator/js/highlight.min.js"></script>
<script src="/assets/translator/js/languages/dart.min.js"></script>
<script src="/assets/translator/js/languages/yaml.min.js"></script>
<script>$(document).ready(function() {
  var diff2htmlUi = new Diff2HtmlUI();
  diff2htmlUi.highlightCode(".d2h-wrapper");
});</script>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-122680122-1', 'auto');
    ga('send', 'pageview');
  </script>

  <!--<meta name="google-site-verification" content="HFqxhSbf9YA_0rBglNLzDiWnrHiK_w4cqDh2YD2GEY4" />-->
<link href="/assets/translator/css/translator.css" rel="stylesheet"></head>
<body>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-ND4LWWZ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<div id="overlay-under-drawer"></div>

    <header class="site-header">
  <nav class="navbar navbar-expand-md justify-content-start justify-content-md-between">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <i class="material-icons">menu</i>
    </button>

    <a class="navbar-brand" href="/">
      <img alt="Flutter by Google" height="37" width="129" class="align-middle" src="/assets/flutter-lockup-4cb0ee072ab312e59784d9fbf4fb7ad42688a7fdaea1270ccf6bbf4f34b7e03f.svg">
    </a>

    <div class="collapse navbar-collapse flex-grow-0" id="navbarSupportedContent">
      <div class="site-header__sheet-bg" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"></div>
      <div class="site-header__sheet">
        <ul class="navbar-nav">

          <li class="nav-item">
            <a class="nav-link active" href="/docs">开发文档</a>
          </li>
          <div class="site-sidebar site-sidebar--header d-md-none">
            <ul class="nav flex-column"><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-1" role="button" aria-expanded="false" aria-controls="sidenav-1">开始使用 Flutter</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-1">
        <li class="nav-item">
    <a class="nav-link" href="/docs/get-started/install">1. 安装和环境配置</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/editor">2. 编辑工具设定</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/test-drive">3. 开发体验初探</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/codelab">4. 编写第一个 Flutter 应用</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/learn-more">5. 了解更多</a>
  </li><div class="dropdown-divider"></div><li class="nav-item">
    <a class="nav-link collapsable" data-toggle="collapse" data-target="#sidenav-1-7" href="#sidenav-1-7" role="button" aria-expanded="true" aria-controls="sidenav-1-7">拥有其他平台开发经验？
    </a>
    <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-1-7">
      <li class="nav-item">
    <a class="nav-link" href="/docs/get-started/flutter-for/android-devs">给 Android 开发者的 Flutter 指南</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/flutter-for/ios-devs">给 iOS 开发者的 Flutter 指南</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/flutter-for/react-native-devs">给 React Native 开发者的 Flutter 指南</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/flutter-for/web-devs">给 Web 开发者的 Flutter 指南</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/flutter-for/xamarin-forms-devs">给 Xamarin.Forms 开发者的 Flutter 指南</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="https://www.dartlang.org/guides/language" target="_blank" rel="noopener">Dart 语言概览<i class="fas fa-external-link-alt"></i></a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-2" role="button" aria-expanded="false" aria-controls="sidenav-2">教程和样例代码</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-2">
        <li class="nav-item">
    <a class="nav-link" href="https://github.com/flutter/samples/blob/master/INDEX.md" target="_blank" rel="noopener">GitHub 上样例应用<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/cookbook">实用教程 (Cookbook)</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/codelabs">Codelabs</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/reference/tutorials">实践教程</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link active" data-toggle="collapse" href="#sidenav-3" role="button" aria-expanded="true" aria-controls="sidenav-3">开发文档</a>

      <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-3">
        <li class="nav-item">
    <a class="nav-link active collapsable" data-toggle="collapse" data-target="#sidenav-3-1" href="/docs/development/ui" role="button" aria-expanded="true" aria-controls="sidenav-3-1">用户界面
    </a>
    <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-3-1">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/widgets-intro">Widgets 介绍</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#sidenav-3-1-2" href="#sidenav-3-1-2" role="button" aria-expanded="false" aria-controls="sidenav-3-1-2">布局构建
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-1-2">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/layout">Flutter 中的布局</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/layout/tutorial">布局构建教程</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/layout/box-constraints">边界约束 (Box constraints)</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link active" href="/docs/development/ui/interactive">交互添加</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/assets-and-images">资源和图片</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/navigation">路由和导航</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#sidenav-3-1-6" href="/docs/development/ui/animations" role="button" aria-expanded="false" aria-controls="sidenav-3-1-6">动画效果
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-1-6">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/animations">介绍</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/animations/overview">概览</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/animations/tutorial">教程</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/animations/hero-animations">主动画 (Hero animations)</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/animations/staggered-animations">交织动画 (Staggered animations)</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#sidenav-3-1-7" href="/docs/development/ui/advanced" role="button" aria-expanded="false" aria-controls="sidenav-3-1-7">用户界面 (UI) 进阶
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-1-7">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/advanced/slivers">滑动效果 (Slivers)</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/advanced/gestures">手势</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/widgets">核心 Widget 目录</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#sidenav-3-2" href="/docs/development/data-and-backend" role="button" aria-expanded="false" aria-controls="sidenav-3-2">数据调用和后端
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-2">
      <li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#sidenav-3-2-1" href="/docs/development/data-and-backend/state-mgmt" role="button" aria-expanded="false" aria-controls="sidenav-3-2-1">状态 (State) 管理
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-2-1">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/state-mgmt/intro">状态管理介绍</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/state-mgmt/declarative">声明式的编程思维</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/state-mgmt/ephemeral-vs-app">短时 (ephemeral) 和共享 (app) 状态</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/state-mgmt/simple">简单的共享 (app) 状态管理</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/state-mgmt/options">状态管理参考</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/json">JSON 和序列化数据</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/firebase">使用 Firebase</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#sidenav-3-3" href="/docs/development/accessibility-and-localization" role="button" aria-expanded="false" aria-controls="sidenav-3-3">应用的无障碍和国际化
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-3">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/accessibility-and-localization/accessibility">无障碍</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/accessibility-and-localization/internationalization">国际化</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#sidenav-3-4" href="/docs/development/platform-integration" role="button" aria-expanded="false" aria-controls="sidenav-3-4">平台集成
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-4">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/platform-integration/platform-channels">撰写双端平台代码 (插件编写实现)</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#sidenav-3-5" href="/docs/development/packages-and-plugins" role="button" aria-expanded="false" aria-controls="sidenav-3-5">Packages (纯 Dart 和原生插件)
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-5">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/packages-and-plugins/using-packages">使用 Packages</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/packages-and-plugins/developing-packages">Package 的开发和提交</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/packages-and-plugins/background-processes">后台进程</a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://pub.flutter-io.cn/flutter" target="_blank" rel="noopener">Package 网站<i class="fas fa-external-link-alt"></i></a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#sidenav-3-6" href="/docs/development/tools" role="button" aria-expanded="false" aria-controls="sidenav-3-6">开发工具和技术细节
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-6">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/android-studio">Android Studio 或类 IntelliJ 系列</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/vs-code">Visual Studio Code</a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://flutter.github.io/devtools/" target="_blank" rel="noopener">Dart 调试工具<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#sidenav-3-6-4" href="/docs/development/tools/sdk" role="button" aria-expanded="false" aria-controls="sidenav-3-6-4">Flutter SDK
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-6-4">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/sdk/upgrading">版本升级</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/sdk/releases">版本列表</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/hot-reload">热重载 (Hot reload)</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/formatting">代码格式</a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://flutter.github.io/devtools/inspector" target="_blank" rel="noopener">Flutter Inspector<i class="fas fa-external-link-alt"></i></a>
  </li></ul>
  </li>

</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-4" role="button" aria-expanded="false" aria-controls="sidenav-4">测试和调优</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-4">
        <li class="nav-item">
    <a class="nav-link" href="/docs/testing/debugging">调试 Flutter 应用</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/testing/oem-debuggers">使用原生的调试器</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/testing/build-modes">构建模式 (Debug/Release/Profile)</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/testing">测试 Flutter 应用</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/testing/best-practices">性能优化最佳实践</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/testing/ui-performance">Flutter 性能分析</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-5" role="button" aria-expanded="false" aria-controls="sidenav-5">打包部署</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-5">
        <li class="nav-item">
    <a class="nav-link" href="/docs/deployment/flavors">配置 flavors 构建双端</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/deployment/android">打包和发布到 Android 平台</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/deployment/ios">打包和发布到 iOS 平台</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/deployment/fastlane-cd">使用 fastlane 持续交付</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-6" role="button" aria-expanded="false" aria-controls="sidenav-6">资源列表</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6">
        <li class="nav-item">
    <a class="nav-link" href="/docs/resources/bootstrap-into-dart">Dart 资源列表</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/inside-flutter">Flutter 工作原理</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/platform-adaptations">平台行为差异和适配</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/technical-overview">技术概览</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/videos">Flutter 技术视频资源</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/faq">常见问题解答</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link " data-toggle="collapse" href="#sidenav-7" role="button" aria-expanded="true" aria-controls="sidenav-7">参考资料</a>

      <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-7">
        <li class="nav-item">
    <a class="nav-link" href="/docs/reference/widgets">Flutter Widget 目录</a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://docs.flutter.cn" target="_blank" rel="noopener">Flutter API 文档<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://pub.flutter-io.cn/flutter" target="_blank" rel="noopener">Package 网站<i class="fas fa-external-link-alt"></i></a>
  </li>
</ul>
    </li></ul>

          </div>

<!-- 
          <li class="nav-item">
            <a class="nav-link" href="/showcase">Showcase</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/community">Community</a>
          </li>
 -->
        </ul>
        <form action="/search" class="site-header__search form-inline">
          <input class="site-header__searchfield form-control" type="search" name="q" id="q" autocomplete="off" placeholder="Search" aria-label="Search">
        </form>
      </div>
    </div>
    <div class="site-header__social navbar-nav flex-row">
      <a class="nav-item nav-link" href="https://twitter.com/flutterdev"><i class="fab fa-twitter fa-lg"></i></a>
      <a class="nav-item nav-link" href="https://www.youtube.com/flutterdev"><i class="fab fa-youtube fa-lg"></i></a>
      <a class="nav-item nav-link" href="https://github.com/flutter"><i class="fab fa-github fa-lg"></i></a>
    </div>
    <a class="site-header__cta btn btn-primary" href="/docs/get-started/install/">Get started</a>
    </nav>
</header>
<div class="site-banner site-banner--default" role="alert">
    <p>
      We are looking for a Flutter Infrastructure engineer!
      <a href="/jobs/infrastructure" target="_blank" rel="noopener">Learn more</a>.
    </p>

  </div>
<div class="container-fluid position-relative">
  <div class="row flex-xl-nowrap">
    <div class="fixed-col site-sidebar site-sidebar--fixed col-12 col-md-3 col-xl-2 d-none d-md-block" data-fixed-column="">
      <ul class="nav flex-column"><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-1" role="button" aria-expanded="false" aria-controls="sidenav-1">开始使用 Flutter</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-1">
        <li class="nav-item">
    <a class="nav-link" href="/docs/get-started/install">1. 安装和环境配置</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/editor">2. 编辑工具设定</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/test-drive">3. 开发体验初探</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/codelab">4. 编写第一个 Flutter 应用</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/learn-more">5. 了解更多</a>
  </li><div class="dropdown-divider"></div><li class="nav-item">
    <a class="nav-link collapsable" data-toggle="collapse" data-target="#sidenav-1-7" href="#sidenav-1-7" role="button" aria-expanded="true" aria-controls="sidenav-1-7">拥有其他平台开发经验？
    </a>
    <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-1-7">
      <li class="nav-item">
    <a class="nav-link" href="/docs/get-started/flutter-for/android-devs">给 Android 开发者的 Flutter 指南</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/flutter-for/ios-devs">给 iOS 开发者的 Flutter 指南</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/flutter-for/react-native-devs">给 React Native 开发者的 Flutter 指南</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/flutter-for/web-devs">给 Web 开发者的 Flutter 指南</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/flutter-for/xamarin-forms-devs">给 Xamarin.Forms 开发者的 Flutter 指南</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="https://www.dartlang.org/guides/language" target="_blank" rel="noopener">Dart 语言概览<i class="fas fa-external-link-alt"></i></a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-2" role="button" aria-expanded="false" aria-controls="sidenav-2">教程和样例代码</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-2">
        <li class="nav-item">
    <a class="nav-link" href="https://github.com/flutter/samples/blob/master/INDEX.md" target="_blank" rel="noopener">GitHub 上样例应用<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/cookbook">实用教程 (Cookbook)</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/codelabs">Codelabs</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/reference/tutorials">实践教程</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link active" data-toggle="collapse" href="#sidenav-3" role="button" aria-expanded="true" aria-controls="sidenav-3">开发文档</a>

      <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-3">
        <li class="nav-item">
    <a class="nav-link active collapsable" data-toggle="collapse" data-target="#sidenav-3-1" href="/docs/development/ui" role="button" aria-expanded="true" aria-controls="sidenav-3-1">用户界面
    </a>
    <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-3-1">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/widgets-intro">Widgets 介绍</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#sidenav-3-1-2" href="#sidenav-3-1-2" role="button" aria-expanded="false" aria-controls="sidenav-3-1-2">布局构建
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-1-2">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/layout">Flutter 中的布局</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/layout/tutorial">布局构建教程</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/layout/box-constraints">边界约束 (Box constraints)</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link active" href="/docs/development/ui/interactive">交互添加</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/assets-and-images">资源和图片</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/navigation">路由和导航</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#sidenav-3-1-6" href="/docs/development/ui/animations" role="button" aria-expanded="false" aria-controls="sidenav-3-1-6">动画效果
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-1-6">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/animations">介绍</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/animations/overview">概览</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/animations/tutorial">教程</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/animations/hero-animations">主动画 (Hero animations)</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/animations/staggered-animations">交织动画 (Staggered animations)</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#sidenav-3-1-7" href="/docs/development/ui/advanced" role="button" aria-expanded="false" aria-controls="sidenav-3-1-7">用户界面 (UI) 进阶
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-1-7">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/advanced/slivers">滑动效果 (Slivers)</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/advanced/gestures">手势</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/widgets">核心 Widget 目录</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#sidenav-3-2" href="/docs/development/data-and-backend" role="button" aria-expanded="false" aria-controls="sidenav-3-2">数据调用和后端
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-2">
      <li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#sidenav-3-2-1" href="/docs/development/data-and-backend/state-mgmt" role="button" aria-expanded="false" aria-controls="sidenav-3-2-1">状态 (State) 管理
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-2-1">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/state-mgmt/intro">状态管理介绍</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/state-mgmt/declarative">声明式的编程思维</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/state-mgmt/ephemeral-vs-app">短时 (ephemeral) 和共享 (app) 状态</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/state-mgmt/simple">简单的共享 (app) 状态管理</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/state-mgmt/options">状态管理参考</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/json">JSON 和序列化数据</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/firebase">使用 Firebase</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#sidenav-3-3" href="/docs/development/accessibility-and-localization" role="button" aria-expanded="false" aria-controls="sidenav-3-3">应用的无障碍和国际化
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-3">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/accessibility-and-localization/accessibility">无障碍</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/accessibility-and-localization/internationalization">国际化</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#sidenav-3-4" href="/docs/development/platform-integration" role="button" aria-expanded="false" aria-controls="sidenav-3-4">平台集成
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-4">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/platform-integration/platform-channels">撰写双端平台代码 (插件编写实现)</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#sidenav-3-5" href="/docs/development/packages-and-plugins" role="button" aria-expanded="false" aria-controls="sidenav-3-5">Packages (纯 Dart 和原生插件)
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-5">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/packages-and-plugins/using-packages">使用 Packages</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/packages-and-plugins/developing-packages">Package 的开发和提交</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/packages-and-plugins/background-processes">后台进程</a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://pub.flutter-io.cn/flutter" target="_blank" rel="noopener">Package 网站<i class="fas fa-external-link-alt"></i></a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#sidenav-3-6" href="/docs/development/tools" role="button" aria-expanded="false" aria-controls="sidenav-3-6">开发工具和技术细节
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-6">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/android-studio">Android Studio 或类 IntelliJ 系列</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/vs-code">Visual Studio Code</a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://flutter.github.io/devtools/" target="_blank" rel="noopener">Dart 调试工具<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#sidenav-3-6-4" href="/docs/development/tools/sdk" role="button" aria-expanded="false" aria-controls="sidenav-3-6-4">Flutter SDK
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-6-4">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/sdk/upgrading">版本升级</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/sdk/releases">版本列表</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/hot-reload">热重载 (Hot reload)</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/formatting">代码格式</a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://flutter.github.io/devtools/inspector" target="_blank" rel="noopener">Flutter Inspector<i class="fas fa-external-link-alt"></i></a>
  </li></ul>
  </li>

</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-4" role="button" aria-expanded="false" aria-controls="sidenav-4">测试和调优</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-4">
        <li class="nav-item">
    <a class="nav-link" href="/docs/testing/debugging">调试 Flutter 应用</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/testing/oem-debuggers">使用原生的调试器</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/testing/build-modes">构建模式 (Debug/Release/Profile)</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/testing">测试 Flutter 应用</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/testing/best-practices">性能优化最佳实践</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/testing/ui-performance">Flutter 性能分析</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-5" role="button" aria-expanded="false" aria-controls="sidenav-5">打包部署</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-5">
        <li class="nav-item">
    <a class="nav-link" href="/docs/deployment/flavors">配置 flavors 构建双端</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/deployment/android">打包和发布到 Android 平台</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/deployment/ios">打包和发布到 iOS 平台</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/deployment/fastlane-cd">使用 fastlane 持续交付</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-6" role="button" aria-expanded="false" aria-controls="sidenav-6">资源列表</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6">
        <li class="nav-item">
    <a class="nav-link" href="/docs/resources/bootstrap-into-dart">Dart 资源列表</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/inside-flutter">Flutter 工作原理</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/platform-adaptations">平台行为差异和适配</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/technical-overview">技术概览</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/videos">Flutter 技术视频资源</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/faq">常见问题解答</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link " data-toggle="collapse" href="#sidenav-7" role="button" aria-expanded="true" aria-controls="sidenav-7">参考资料</a>

      <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-7">
        <li class="nav-item">
    <a class="nav-link" href="/docs/reference/widgets">Flutter Widget 目录</a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://docs.flutter.cn" target="_blank" rel="noopener">Flutter API 文档<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://pub.flutter-io.cn/flutter" target="_blank" rel="noopener">Package 网站<i class="fas fa-external-link-alt"></i></a>
  </li>
</ul>
    </li></ul>

    </div>
    <div id="site-toc--side" class="site-toc site-toc--side fixed-col col-xl-2 order-3" data-fixed-column="">
  <header class="site-toc__title">
    Contents
    <button type="button" class="btn site-toc--button__page-top" aria-label="Page top"></button>
    </header>
  <ul class="section-nav nav">
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#stateful-and-stateless-widgets">Stateful and stateless widgets</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#creating-a-stateful-widget">Creating a stateful widget</a>
<ul class="nav">
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#step-0-get-ready">Step 0: Get ready</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#step-1-decide-which-object-manages-the-widgets-state">Step 1: Decide which object manages the widget’s state</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#step-2-subclass-statefulwidget">Step 2: Subclass StatefulWidget</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#step-3-subclass-state">Step 3: Subclass State</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#step-4-plug-the-stateful-widget-into-the-widget-tree">Step 4: Plug the stateful widget into the widget tree</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#problems">Problems?</a></li>
</ul>
</li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#managing-state">Managing state</a>
<ul class="nav">
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#the-widget-manages-its-own-state">The widget manages its own state</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#the-parent-widget-manages-the-widgets-state">The parent widget manages the widget’s state</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#a-mix-and-match-approach">A mix-and-match approach</a></li>
</ul>
</li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#other-interactive-widgets">Other interactive widgets</a>
<ul class="nav">
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#standard-widgets">Standard widgets</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#material-components">Material Components</a></li>
</ul>
</li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#resources">Resources</a></li>
</ul>
</div>
<main class="site-content col-12 col-md-9 offset-md-3 col-xl-8 offset-xl-2 col-xxl-8 offset-xxl-2" role="main">
      <div class="container">
        
        
        <header class="site-content__title">
          <div id="page-github-links" class="btn-group" aria-label="Page GitHub links" role="group">
  <a href="https://github.com/cfug/flutter.cn/tree/master/src/docs/development/ui/interactive.md" class="btn no-automatic-external" title="View page source" target="_blank" rel="noopener">
    <i class="fas fa-file-alt fa-sm"></i>
  </a>
  <a href="https://github.com/cfug/flutter.cn/issues/new?title='Adding interactivity to your Flutter app' page issue&amp;body=
Page URL: https://flutter.dev/docs/development/ui/interactive.html%0D%0A
Page source: https://github.com/cfug/flutter.cn/tree/master/src/docs/development/ui/interactive.md%0D%0A
%0D%0A
Found a typo? You can fix it yourself by going to the page source and clicking the pencil icon. Or finish creating this issue.%0D%0A
%0D%0A
Description of issue:" class="btn no-automatic-external" title="Report an issue with this page" target="_blank" rel="noopener">
    <i class="fas fa-bug fa-sm"></i>
  </a>
</div>

          <h1 id="adding-interactivity-to-your-flutter-app">Adding interactivity to your Flutter app</h1>
          

<nav aria-label="breadcrumb">
  <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
  <li class="breadcrumb-item" property="itemListElement" typeof="ListItem"><a href="/docs" property="item" typeof="WebPage"><span property="name">文档</span>
      </a>
      <meta property="position" content="1">
    </li>
  <li class="breadcrumb-item" property="itemListElement" typeof="ListItem"><a href="/docs/development" property="item" typeof="WebPage"><span property="name">开发文档</span>
      </a>
      <meta property="position" content="2">
    </li>
  <li class="breadcrumb-item" property="itemListElement" typeof="ListItem"><a href="/docs/development/ui" property="item" typeof="WebPage"><span property="name">UI</span>
      </a>
      <meta property="position" content="3">
    </li>
  <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem" aria-current="page"><a href="/docs/development/ui/interactive.html" property="item" typeof="WebPage"><span property="name">Adding interactivity</span>
      </a>
      <meta property="position" content="4">
    </li>
  
  </ol>
</nav>
          </header>
        <div id="site-toc--inline" class="site-toc site-toc--inline ">
  <header class="site-toc__title">
    Contents
    </header>
  <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#stateful-and-stateless-widgets">Stateful and stateless widgets</a></li>
<li class="toc-entry toc-h2"><a href="#creating-a-stateful-widget">Creating a stateful widget</a>
<ul>
<li class="toc-entry toc-h3"><a href="#step-0-get-ready">Step 0: Get ready</a></li>
<li class="toc-entry toc-h3"><a href="#step-1-decide-which-object-manages-the-widgets-state">Step 1: Decide which object manages the widget’s state</a></li>
<li class="toc-entry toc-h3"><a href="#step-2-subclass-statefulwidget">Step 2: Subclass StatefulWidget</a></li>
<li class="toc-entry toc-h3"><a href="#step-3-subclass-state">Step 3: Subclass State</a></li>
<li class="toc-entry toc-h3"><a href="#step-4-plug-the-stateful-widget-into-the-widget-tree">Step 4: Plug the stateful widget into the widget tree</a></li>
<li class="toc-entry toc-h3"><a href="#problems">Problems?</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#managing-state">Managing state</a>
<ul>
<li class="toc-entry toc-h3"><a href="#the-widget-manages-its-own-state">The widget manages its own state</a></li>
<li class="toc-entry toc-h3"><a href="#the-parent-widget-manages-the-widgets-state">The parent widget manages the widget’s state</a></li>
<li class="toc-entry toc-h3"><a href="#a-mix-and-match-approach">A mix-and-match approach</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#other-interactive-widgets">Other interactive widgets</a>
<ul>
<li class="toc-entry toc-h3"><a href="#standard-widgets">Standard widgets</a></li>
<li class="toc-entry toc-h3"><a href="#material-components">Material Components</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#resources">Resources</a></li>
</ul>
</div>
<aside class="alert alert-secondary" role="alert">
  <h4 class="no_toc" id="what-youll-learn">
<a id="what-youll-learn" class="anchor" href="#what-youll-learn" aria-hidden="true"><span class="octicon octicon-link"></span></a>What you’ll learn</h4>

  <ul>
    <li>How to respond to taps.</li>
    <li>How to create a custom widget.</li>
    <li>The difference between stateless and stateful widgets.</li>
  </ul>
</aside>

<p>How do you modify your app to make it react to user input? In this tutorial,
you’ll add interactivity to an app that contains only non-interactive widgets.
Specifically, you’ll modify an icon to make it tappable by creating a custom
stateful widget that manages two stateless widgets.</p>

<p><a href="/docs/development/ui/layout/tutorial">Layout tutorial</a> showed you how to create the layout for the following
screenshot.</p>

<figure class="site-figure ">
  <div class="site-figure-container">
    <img class="site-mobile-screenshot border" alt="The layout tutorial app" src="/assets/ui/layout/lakes-2e8707102ca4f56f44e40ce3703606e1600ac1574fe5544c0f2d96f966bed853.jpg">
    <figcaption class="figure-caption">The layout tutorial app</figcaption>
    </div>
</figure>

<p>When the app first launches, the star is solid red, indicating that this lake
has previously been favorited. The number next to the star indicates that 41
people have favorited this lake.  After completing this tutorial, tapping the
star removes its favorited status, replacing the solid star with an outline and
decreasing the count. Tapping again favorites the lake, drawing a solid star and
increasing the count.</p>

<p class="text-center"><img class="mw-100" alt="The custom widget you'll create" width="200px" src="/assets/ui/favorited-not-favorited-e819c6dfba41b33418caa51282b524f04c12ec5217c41b19cefed685fb4d814b.png"></p>

<p>To accomplish this, you’ll create a single custom widget that includes both the
star and the count, which are themselves widgets. Tapping the star changes state
for both widgets, so the same widget should manage both.</p>

<p>You can get right to touching the code in <a href="#step-2">Step 2: Subclass
StatefulWidget</a>. If you want to try different ways of managing state,
skip to <a href="#managing-state">Managing state</a>.</p>

<h2 id="stateful-and-stateless-widgets">
<a id="stateful-and-stateless-widgets" class="anchor" href="#stateful-and-stateless-widgets" aria-hidden="true"><span class="octicon octicon-link"></span></a>Stateful and stateless widgets</h2>

<p>A widget is either stateful or stateless. If a widget can change—when a
user interacts with it, for example—it’s stateful.</p>

<p>A <em>stateless</em> widget never changes. <a href="https://api.flutter.dev/flutter/widgets/Icon-class.html">Icon</a>, <a href="https://api.flutter.dev/flutter/material/IconButton-class.html">IconButton</a>, and <a href="https://api.flutter.dev/flutter/widgets/Text-class.html">Text</a> are
examples of stateless widgets. Stateless widgets subclass <a href="https://api.flutter.dev/flutter/widgets/StatelessWidget-class.html">StatelessWidget</a>.</p>

<p>A <em>stateful</em> widget is dynamic: for example, it can change its appearance in
response to events triggered by user interactions or when it receives data.
<a href="https://api.flutter.dev/flutter/material/Checkbox-class.html">Checkbox</a>, <a href="https://api.flutter.dev/flutter/material/Radio-class.html">Radio</a>, <a href="https://api.flutter.dev/flutter/material/Slider-class.html">Slider</a>, <a href="https://api.flutter.dev/flutter/material/InkWell-class.html">InkWell</a>, <a href="https://api.flutter.dev/flutter/widgets/Form-class.html">Form</a>, and <a href="https://api.flutter.dev/flutter/material/TextField-class.html">TextField</a>
are examples of stateful widgets. Stateful widgets subclass <a href="https://api.flutter.dev/flutter/widgets/StatefulWidget-class.html">StatefulWidget</a>.</p>

<p>A widget’s state is stored in a <a href="https://api.flutter.dev/flutter/widgets/State-class.html">State</a> object, separating the widget’s state
from its appearance. The state consists of values that can change, like a
slider’s current value or whether a checkbox is checked. When the widget’s state
changes, the state object calls <code class="highlighter-rouge">setState()</code>, telling the framework to redraw
the widget.</p>

<h2 id="creating-a-stateful-widget">
<a id="creating-a-stateful-widget" class="anchor" href="#creating-a-stateful-widget" aria-hidden="true"><span class="octicon octicon-link"></span></a>Creating a stateful widget</h2>

<aside class="alert alert-secondary" role="alert">
  <h4 class="no_toc" id="whats-the-point">
<a id="whats-the-point" class="anchor" href="#whats-the-point" aria-hidden="true"><span class="octicon octicon-link"></span></a>What's the point?</h4>

  <ul>
    <li>A stateful widget is implemented by two classes: a subclass of
<code class="highlighter-rouge">StatefulWidget</code> and a subclass of <code class="highlighter-rouge">State</code>.</li>
    <li>The state class contains the widget’s mutable state and the widget’s
<code class="highlighter-rouge">build()</code> method.</li>
    <li>When the widget’s state changes, the state object calls <code class="highlighter-rouge">setState()</code>,
telling the framework to redraw the widget.</li>
  </ul>
</aside>

<p>In this section, you’ll create a custom stateful widget. You’ll replace two
stateless widgets—the solid red star and the numeric count next to
it—with a single custom stateful widget that manages a row with two
children widgets: an <code class="highlighter-rouge">IconButton</code> and <code class="highlighter-rouge">Text</code>.</p>

<p>Implementing a custom stateful widget requires creating two classes:</p>

<ul>
  <li>A subclass of <code class="highlighter-rouge">StatefulWidget</code> that defines the widget.</li>
  <li>A subclass of <code class="highlighter-rouge">State</code> that contains the state for that widget and defines the
widget’s <code class="highlighter-rouge">build()</code> method.</li>
</ul>

<p>This section shows you how to build a stateful widget, called <code class="highlighter-rouge">FavoriteWidget</code>,
for the lakes app. After setting up, your first step is choosing how state is
managed for <code class="highlighter-rouge">FavoriteWidget</code>.</p>

<h3 id="step-0-get-ready">
<a id="step-0-get-ready" class="anchor" href="#step-0-get-ready" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 0: Get ready</h3>

<p>If you’ve already built the app in <a href="/docs/development/ui/layout/tutorial#step-6-final-touch">Layout tutorial (step 6)</a>, skip to the next
section.</p>

<ol>
  <li>Make sure you’ve <a href="/docs/get-started/install">set up</a> your environment.</li>
  <li>
<a href="/docs/get-started/codelab#step-1-create-the-starter-flutter-app">Create a basic “Hello World” Flutter app</a>.</li>
  <li>Replace the <code class="highlighter-rouge">lib/main.dart</code> file with
<a href="https://github.com/cfug/flutter.cn/tree/master/examples/layout/lakes/step6/lib/main.dart">main.dart</a>.</li>
  <li>Replace the <code class="highlighter-rouge">pubspec.yaml</code> file with
<a href="https://github.com/cfug/flutter.cn/tree/master/examples/layout/lakes/step6/pubspec.yaml">pubspec.yaml</a>.</li>
  <li>Create an <code class="highlighter-rouge">images</code> directory in your project, and add
<a href="https://github.com/cfug/flutter.cn/tree/master/examples/layout/lakes/step6/images/lake.jpg">lake.jpg</a>.</li>
</ol>

<p>Once you have a connected and enabled device, or you’ve launched the <a href="/docs/get-started/install/macos#set-up-the-ios-simulator">iOS
simulator</a> (part of the Flutter install), you are good to go!</p>

<p><a name="step-1"></a></p>
<h3 id="step-1-decide-which-object-manages-the-widgets-state">
<a id="step-1-decide-which-object-manages-the-widgets-state" class="anchor" href="#step-1-decide-which-object-manages-the-widgets-state" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 1: Decide which object manages the widget’s state</h3>

<p>A widget’s state can be managed in several ways, but in our example the widget
itself, <code class="highlighter-rouge">FavoriteWidget</code>, will manage its own state. In this example, toggling the
star is an isolated action that doesn’t affect the parent widget or the rest of
the UI, so the widget can handle its state internally.</p>

<p>Learn more about the separation of widget and state, and how state might be
managed, in <a href="#managing-state">Managing state</a>.</p>

<p><a name="step-2"></a></p>
<h3 id="step-2-subclass-statefulwidget">
<a id="step-2-subclass-statefulwidget" class="anchor" href="#step-2-subclass-statefulwidget" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 2: Subclass StatefulWidget</h3>

<p>The <code class="highlighter-rouge">FavoriteWidget</code> class manages its own state, so it overrides
<code class="highlighter-rouge">createState()</code> to create a <code class="highlighter-rouge">State</code> object. The framework calls <code class="highlighter-rouge">createState()</code>
when it wants to build the widget. In this example, <code class="highlighter-rouge">createState()</code> returns an
instance of <code class="highlighter-rouge">_FavoriteWidgetState</code>, which you’ll implement in the next step.</p>

<div class="code-excerpt">
<div class="code-excerpt__header">lib/main.dart (FavoriteWidget)</div>
<div class="code-excerpt__code"><pre class="prettyprint lang-dart">class FavoriteWidget extends StatefulWidget {
  @override
  _FavoriteWidgetState createState() =&gt; _FavoriteWidgetState();
}</pre></div>
</div>

<aside class="alert alert-info" role="alert">
  <p><i class="fas fa-info-circle"></i> <strong>备忘：</strong>
  Members or classes that start with an underscore (<code class="highlighter-rouge">_</code>) are private. For more
  information, see <a href="https://www.dartlang.org/guides/language/language-tour#libraries-and-visibility">Libraries and visibility,</a> a section in the <a href="https://www.dartlang.org/guides/language/language-tour">Dart language
  tour.</a></p>

</aside>

<p><a name="step-3"></a></p>
<h3 id="step-3-subclass-state">
<a id="step-3-subclass-state" class="anchor" href="#step-3-subclass-state" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 3: Subclass State</h3>

<p>The <code class="highlighter-rouge">_FavoriteWidgetState</code> class stores the mutable data that can change over
the lifetime of the widget. When the app first launches, the UI displays a solid
red star, indicating that the lake has “favorite” status, along with 41 likes.
These values are stored in the <code class="highlighter-rouge">_isFavorited</code> and <code class="highlighter-rouge">_favoriteCount</code> fields:</p>

<div class="code-excerpt">
<div class="code-excerpt__header">lib/main.dart (_FavoriteWidgetState fields)</div>
<div class="code-excerpt__code"><pre class="prettyprint lang-dart">class _FavoriteWidgetState extends State&lt;FavoriteWidget&gt; {
  <span class="highlight">bool _isFavorited = true;</span>
  <span class="highlight">int _favoriteCount = 41;</span>
  // ···
}</pre></div>
</div>

<p>The class also defines a <code class="highlighter-rouge">build()</code> method, which creates a row containing a red
<code class="highlighter-rouge">IconButton</code>, and <code class="highlighter-rouge">Text</code>.  You use <a href="https://api.flutter.dev/flutter/material/IconButton-class.html">IconButton</a> (instead of <code class="highlighter-rouge">Icon</code>) because it
has an <code class="highlighter-rouge">onPressed</code> property that defines the callback function
(<code class="highlighter-rouge">_toggleFavorite</code>) for handling a tap. You’ll define the callback function
next.</p>

<div class="code-excerpt">
<div class="code-excerpt__header">lib/main.dart (_FavoriteWidgetState build)</div>
<div class="code-excerpt__code"><pre class="prettyprint lang-dart">class _FavoriteWidgetState extends State&lt;FavoriteWidget&gt; {
  // ···
  @override
  Widget <span class="highlight">build</span>(BuildContext context) {
    return Row(
      mainAxisSize: MainAxisSize.min,
      children: [
        Container(
          padding: EdgeInsets.all(0),
          child: IconButton(
            <span class="highlight">icon: (_isFavorited ? Icon(Icons.star) : Icon(Icons.star_border)),</span>
            color: Colors.red[500],
            <span class="highlight">onPressed: _toggleFavorite,</span>
          ),
        ),
        SizedBox(
          width: 18,
          child: Container(
            <span class="highlight">child: Text('$_favoriteCount'),</span>
          ),
        ),
      ],
    );
  }
}</pre></div>
</div>

<aside class="alert alert-success" role="alert">
  <p><i class="far fa-lightbulb"></i> <strong>小提示：</strong>
  Placing the <code class="highlighter-rouge">Text</code> in a <a href="https://api.flutter.dev/flutter/widgets/SizedBox-class.html">SizedBox</a> and setting its width prevents a
  discernible “jump” when the text changes between the values of 40 and 41
  — a jump would otherwise occur because those values have different
  widths.</p>
</aside>

<p>The <code class="highlighter-rouge">_toggleFavorite()</code> method, which is called when the <code class="highlighter-rouge">IconButton</code> is
pressed, calls <code class="highlighter-rouge">setState()</code>. Calling <code class="highlighter-rouge">setState()</code> is critical, because this
tells the framework that the widget’s state has changed and that the widget
should be redraw. The function argument to <code class="highlighter-rouge">setState()</code> toggles the UI between
these two states:</p>

<ul>
  <li>A <code class="highlighter-rouge">star</code> icon and the number 41</li>
  <li>A <code class="highlighter-rouge">star_border</code> icon and the number 40</li>
</ul>

<div class="code-excerpt">
<div class="code-excerpt__code"><pre class="prettyprint lang-dart">void _toggleFavorite() {
  setState(() {
    if (_isFavorited) {
      _favoriteCount -= 1;
      _isFavorited = false;
    } else {
      _favoriteCount += 1;
      _isFavorited = true;
    }
  });
}</pre></div>
</div>

<p><a name="step-4"></a></p>
<h3 id="step-4-plug-the-stateful-widget-into-the-widget-tree">
<a id="step-4-plug-the-stateful-widget-into-the-widget-tree" class="anchor" href="#step-4-plug-the-stateful-widget-into-the-widget-tree" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 4: Plug the stateful widget into the widget tree</h3>

<p>Add your custom stateful widget to the widget tree in the app’s <code class="highlighter-rouge">build()</code>
method. First, locate the code that creates the <code class="highlighter-rouge">Icon</code> and <code class="highlighter-rouge">Text</code>, and delete
it. In the same location, create the stateful widget:</p>

<div class="d2h-wrapper">
    <div id="d2h-001115" class="d2h-file-wrapper" data-lang="dart">
    <div class="d2h-file-header">
    <span class="d2h-file-name-wrapper">
    <svg aria-hidden="true" class="d2h-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12">
        <path d="M6 5H2v-1h4v1zM2 8h7v-1H2v1z m0 2h7v-1H2v1z m0 2h7v-1H2v1z m10-7.5v9.5c0 0.55-0.45 1-1 1H1c-0.55 0-1-0.45-1-1V2c0-0.55 0.45-1 1-1h7.5l3.5 3.5z m-1 0.5L8 2H1v12h10V5z"></path>
    </svg>    <span class="d2h-file-name">layout/lakes/{step6 → interactive}/lib/main.dart</span>
    </span>
    </div>
    <div class="d2h-file-diff">
        <div class="d2h-code-wrapper">
            <table class="d2h-diff-table">
                <tbody class="d2h-diff-tbody">
                <tr>
    <td class="d2h-code-linenumber d2h-info"></td>
    <td class="d2h-info">
        <div class="d2h-code-line d2h-info">@@ -10,2 +5,2 @@</div>
    </td>
</tr>
<tr>
    <td class="d2h-code-linenumber d2h-cntx">
      <div class="line-num1">10</div>
<div class="line-num2">5</div>
    </td>
    <td class="d2h-cntx">
        <div class="d2h-code-line d2h-cntx">
            <span class="d2h-code-line-prefix"> </span>
            <span class="d2h-code-line-ctn">class MyApp extends StatelessWidget {</span>
        </div>
    </td>
</tr>
<tr>
    <td class="d2h-code-linenumber d2h-cntx">
      <div class="line-num1">11</div>
<div class="line-num2">6</div>
    </td>
    <td class="d2h-cntx">
        <div class="d2h-code-line d2h-cntx">
            <span class="d2h-code-line-prefix"> </span>
            <span class="d2h-code-line-ctn">  @override</span>
        </div>
    </td>
</tr>
<tr>
    <td class="d2h-code-linenumber d2h-info"></td>
    <td class="d2h-info">
        <div class="d2h-code-line d2h-info">@@ -38,11 +33,7 @@</div>
    </td>
</tr>
<tr>
    <td class="d2h-code-linenumber d2h-cntx">
      <div class="line-num1">38</div>
<div class="line-num2">33</div>
    </td>
    <td class="d2h-cntx">
        <div class="d2h-code-line d2h-cntx">
            <span class="d2h-code-line-prefix"> </span>
            <span class="d2h-code-line-ctn">              ],</span>
        </div>
    </td>
</tr>
<tr>
    <td class="d2h-code-linenumber d2h-cntx">
      <div class="line-num1">39</div>
<div class="line-num2">34</div>
    </td>
    <td class="d2h-cntx">
        <div class="d2h-code-line d2h-cntx">
            <span class="d2h-code-line-prefix"> </span>
            <span class="d2h-code-line-ctn">            ),</span>
        </div>
    </td>
</tr>
<tr>
    <td class="d2h-code-linenumber d2h-cntx">
      <div class="line-num1">40</div>
<div class="line-num2">35</div>
    </td>
    <td class="d2h-cntx">
        <div class="d2h-code-line d2h-cntx">
            <span class="d2h-code-line-prefix"> </span>
            <span class="d2h-code-line-ctn">          ),</span>
        </div>
    </td>
</tr>
<tr>
    <td class="d2h-code-linenumber d2h-del">
      <div class="line-num1">41</div>
<div class="line-num2"></div>
    </td>
    <td class="d2h-del">
        <div class="d2h-code-line d2h-del">
            <span class="d2h-code-line-prefix">-</span>
            <span class="d2h-code-line-ctn">          <del>Icon(</del></span>
        </div>
    </td>
</tr>
<tr>
    <td class="d2h-code-linenumber d2h-ins">
      <div class="line-num1"></div>
<div class="line-num2">36</div>
    </td>
    <td class="d2h-ins">
        <div class="d2h-code-line d2h-ins">
            <span class="d2h-code-line-prefix">+</span>
            <span class="d2h-code-line-ctn">          <ins>FavoriteWidget(),</ins></span>
        </div>
    </td>
</tr>
<tr>
    <td class="d2h-code-linenumber d2h-del">
      <div class="line-num1">42</div>
<div class="line-num2"></div>
    </td>
    <td class="d2h-del">
        <div class="d2h-code-line d2h-del">
            <span class="d2h-code-line-prefix">-</span>
            <span class="d2h-code-line-ctn">            Icons.star,</span>
        </div>
    </td>
</tr>
<tr>
    <td class="d2h-code-linenumber d2h-del">
      <div class="line-num1">43</div>
<div class="line-num2"></div>
    </td>
    <td class="d2h-del">
        <div class="d2h-code-line d2h-del">
            <span class="d2h-code-line-prefix">-</span>
            <span class="d2h-code-line-ctn">            color: Colors.red[500],</span>
        </div>
    </td>
</tr>
<tr>
    <td class="d2h-code-linenumber d2h-del">
      <div class="line-num1">44</div>
<div class="line-num2"></div>
    </td>
    <td class="d2h-del">
        <div class="d2h-code-line d2h-del">
            <span class="d2h-code-line-prefix">-</span>
            <span class="d2h-code-line-ctn">          ),</span>
        </div>
    </td>
</tr>
<tr>
    <td class="d2h-code-linenumber d2h-del">
      <div class="line-num1">45</div>
<div class="line-num2"></div>
    </td>
    <td class="d2h-del">
        <div class="d2h-code-line d2h-del">
            <span class="d2h-code-line-prefix">-</span>
            <span class="d2h-code-line-ctn">          Text('41'),</span>
        </div>
    </td>
</tr>
<tr>
    <td class="d2h-code-linenumber d2h-cntx">
      <div class="line-num1">46</div>
<div class="line-num2">37</div>
    </td>
    <td class="d2h-cntx">
        <div class="d2h-code-line d2h-cntx">
            <span class="d2h-code-line-prefix"> </span>
            <span class="d2h-code-line-ctn">        ],</span>
        </div>
    </td>
</tr>
<tr>
    <td class="d2h-code-linenumber d2h-cntx">
      <div class="line-num1">47</div>
<div class="line-num2">38</div>
    </td>
    <td class="d2h-cntx">
        <div class="d2h-code-line d2h-cntx">
            <span class="d2h-code-line-prefix"> </span>
            <span class="d2h-code-line-ctn">      ),</span>
        </div>
    </td>
</tr>
<tr>
    <td class="d2h-code-linenumber d2h-cntx">
      <div class="line-num1">48</div>
<div class="line-num2">39</div>
    </td>
    <td class="d2h-cntx">
        <div class="d2h-code-line d2h-cntx">
            <span class="d2h-code-line-prefix"> </span>
            <span class="d2h-code-line-ctn">    );</span>
        </div>
    </td>
</tr>
<tr>
    <td class="d2h-code-linenumber d2h-info"></td>
    <td class="d2h-info">
        <div class="d2h-code-line d2h-info">@@ -117,3 +108,3 @@</div>
    </td>
</tr>
<tr>
    <td class="d2h-code-linenumber d2h-cntx">
      <div class="line-num1">117</div>
<div class="line-num2">108</div>
    </td>
    <td class="d2h-cntx">
        <div class="d2h-code-line d2h-cntx">
            <span class="d2h-code-line-prefix"> </span>
            <span class="d2h-code-line-ctn">    );</span>
        </div>
    </td>
</tr>
<tr>
    <td class="d2h-code-linenumber d2h-cntx">
      <div class="line-num1">118</div>
<div class="line-num2">109</div>
    </td>
    <td class="d2h-cntx">
        <div class="d2h-code-line d2h-cntx">
            <span class="d2h-code-line-prefix"> </span>
            <span class="d2h-code-line-ctn">  }</span>
        </div>
    </td>
</tr>
<tr>
    <td class="d2h-code-linenumber d2h-cntx">
      <div class="line-num1">119</div>
<div class="line-num2">110</div>
    </td>
    <td class="d2h-cntx">
        <div class="d2h-code-line d2h-cntx">
            <span class="d2h-code-line-prefix"> </span>
            <span class="d2h-code-line-ctn">}</span>
        </div>
    </td>
</tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
</div>

<p>That’s it! When you hot reload the app, the star icon should now respond to taps.</p>

<h3 id="problems">
<a id="problems" class="anchor" href="#problems" aria-hidden="true"><span class="octicon octicon-link"></span></a>Problems?</h3>

<p>If you can’t get your code to run, look in your IDE for possible errors.
<a href="/docs/testing/debugging">Debugging Flutter Apps</a> might help. If you still can’t
find the problem, check your code against the interactive lakes example on
GitHub.</p>

<ul>
  <li><a href="https://github.com/cfug/flutter.cn/tree/master/examples/layout/lakes/interactive/lib/main.dart">lib/main.dart</a></li>
  <li><a href="https://github.com/cfug/flutter.cn/tree/master/examples/layout/lakes/interactive/pubspec.yaml">pubspec.yaml</a></li>
  <li><a href="https://github.com/cfug/flutter.cn/tree/master/examples/layout/lakes/interactive/images/lake.jpg">lakes.jpg</a></li>
</ul>

<p>If you still have questions, refer to any one of the developer
<a href="/community">community</a> channels.</p>

<hr>

<p>The rest of this page covers several ways a widget’s state can be managed, and
lists other available interactive widgets.</p>

<h2 id="managing-state">
<a id="managing-state" class="anchor" href="#managing-state" aria-hidden="true"><span class="octicon octicon-link"></span></a>Managing state</h2>

<aside class="alert alert-secondary" role="alert">
  <h4 class="no_toc" id="whats-the-point-1">
<a id="whats-the-point-1" class="anchor" href="#whats-the-point-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>What's the point?</h4>

  <ul>
    <li>There are different approaches for managing state.</li>
    <li>You, as the widget designer, choose which approach to use.</li>
    <li>If in doubt, start by managing state in the parent widget.</li>
  </ul>
</aside>

<p>Who manages the stateful widget’s state? The widget itself? The parent widget?
Both? Another object? The answer is… it depends. There are several valid ways
to make your widget interactive. You, as the widget designer, make the decision
based on how you expect your widget to be used. Here are the most common ways to
manage state:</p>

<ul>
  <li><a href="#self-managed">The widget manages its own state</a></li>
  <li><a href="#parent-managed">The parent manages the widget’s state</a></li>
  <li><a href="#mix-and-match">A mix-and-match approach</a></li>
</ul>

<p>How do you decide which approach to use? The following principles should help
you decide:</p>

<ul>
  <li>
    <p>If the state in question is user data, for example the checked or unchecked
mode of a checkbox, or the position of a slider, then the state is best
managed by the parent widget.</p>
  </li>
  <li>
    <p>If the state in question is aesthetic, for example an animation, then the
state is best managed by the widget itself.</p>
  </li>
</ul>

<p>If in doubt, start by managing state in the parent widget.</p>

<p>We’ll give examples of the different ways of managing state by creating three
simple examples: TapboxA, TapboxB, and TapboxC. The examples all work
similarly—each creates a container that, when tapped, toggles between a
green or grey box. The <code class="highlighter-rouge">_active</code> boolean determines the color: green for active
or grey for inactive.</p>

<div class="row mb-4">
  <div class="col-12 text-center">
    <img class="border mt-1 mb-1 mw-100" width="150px" alt="Active state" src="/assets/ui/tapbox-active-state-c15c36d6d1dba545455bdf35a9296a5c10e687766827eb34b65a5249f6f8fb26.png">
    <img class="border mt-1 mb-1 mw-100" width="150px" alt="Inactive state" src="/assets/ui/tapbox-inactive-state-aca712be6a90ad554342ab72926c4f167d76ca505794fcdad9caf6a3ff6f94b7.png">
  </div>
</div>

<p>These examples use <a href="https://api.flutter.dev/flutter/widgets/GestureDetector-class.html">GestureDetector</a> to capture activity on the Container.</p>

<p><a name="self-managed"></a></p>
<h3 id="the-widget-manages-its-own-state">
<a id="the-widget-manages-its-own-state" class="anchor" href="#the-widget-manages-its-own-state" aria-hidden="true"><span class="octicon octicon-link"></span></a>The widget manages its own state</h3>

<p>Sometimes it makes the most sense for the widget to manage its state internally.
For example, <a href="https://api.flutter.dev/flutter/widgets/ListView-class.html">ListView</a> automatically scrolls when its content exceeds the
render box. Most developers using ListView don’t want to manage ListView’s
scrolling behavior, so ListView itself manages its scroll offset.</p>

<p>The <code class="highlighter-rouge">_TapboxAState</code> class:</p>

<ul>
  <li>Manages state for <code class="highlighter-rouge">TapboxA</code>.</li>
  <li>Defines the <code class="highlighter-rouge">_active</code> boolean which determines the box’s current color.</li>
  <li>Defines the <code class="highlighter-rouge">_handleTap()</code> function, which updates <code class="highlighter-rouge">_active</code> when the box is
tapped and calls the <code class="highlighter-rouge">setState()</code> function to update the UI.</li>
  <li>Implements all interactive behavior for the widget.</li>
</ul>

<pre class="prettyprint lang-dart">// TapboxA manages its own state.

//------------------------- TapboxA ----------------------------------

class TapboxA extends StatefulWidget {
  TapboxA({Key key}) : super(key: key);

  @override
  _TapboxAState createState() =&gt; _TapboxAState();
}

class _TapboxAState extends State&lt;TapboxA&gt; {
  bool _active = false;

  void _handleTap() {
    setState(() {
      _active = !_active;
    });
  }

  Widget build(BuildContext context) {
    return GestureDetector(
      onTap: _handleTap,
      child: Container(
        child: Center(
          child: Text(
            _active ? 'Active' : 'Inactive',
            style: TextStyle(fontSize: 32.0, color: Colors.white),
          ),
        ),
        width: 200.0,
        height: 200.0,
        decoration: BoxDecoration(
          color: _active ? Colors.lightGreen[700] : Colors.grey[600],
        ),
      ),
    );
  }
}

//------------------------- MyApp ----------------------------------

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Demo',
      home: Scaffold(
        appBar: AppBar(
          title: Text('Flutter Demo'),
        ),
        body: Center(
          child: TapboxA(),
        ),
      ),
    );
  }
}</pre>

<hr>

<p><a name="parent-managed"></a></p>
<h3 id="the-parent-widget-manages-the-widgets-state">
<a id="the-parent-widget-manages-the-widgets-state" class="anchor" href="#the-parent-widget-manages-the-widgets-state" aria-hidden="true"><span class="octicon octicon-link"></span></a>The parent widget manages the widget’s state</h3>

<p>Often it makes the most sense for the parent widget to manage the state and tell
its child widget when to update. For example, <a href="https://api.flutter.dev/flutter/material/IconButton-class.html">IconButton</a> allows you to treat
an icon as a tappable button. IconButton is a stateless widget because we
decided that the parent widget needs to know whether the button has been tapped,
so it can take appropriate action.</p>

<p>In the following example, TapboxB exports its state to its parent through a
callback. Because TapboxB doesn’t manage any state, it subclasses
StatelessWidget.</p>

<p>The ParentWidgetState class:</p>

<ul>
  <li>Manages the <code class="highlighter-rouge">_active</code> state for TapboxB.</li>
  <li>Implements <code class="highlighter-rouge">_handleTapboxChanged()</code>, the method called when the box is tapped.</li>
  <li>When the state changes, calls <code class="highlighter-rouge">setState()</code> to update the UI.</li>
</ul>

<p>The TapboxB class:</p>

<ul>
  <li>Extends StatelessWidget because all state is handled by its parent.</li>
  <li>When a tap is detected, it notifies the parent.</li>
</ul>

<pre class="prettyprint lang-dart">// ParentWidget manages the state for TapboxB.

//------------------------ ParentWidget --------------------------------

class ParentWidget extends StatefulWidget {
  @override
  _ParentWidgetState createState() =&gt; _ParentWidgetState();
}

class _ParentWidgetState extends State&lt;ParentWidget&gt; {
  bool _active = false;

  void _handleTapboxChanged(bool newValue) {
    setState(() {
      _active = newValue;
    });
  }

  @override
  Widget build(BuildContext context) {
    return Container(
      child: TapboxB(
        active: _active,
        onChanged: _handleTapboxChanged,
      ),
    );
  }
}

//------------------------- TapboxB ----------------------------------

class TapboxB extends StatelessWidget {
  TapboxB({Key key, this.active: false, @required this.onChanged})
      : super(key: key);

  final bool active;
  final ValueChanged&lt;bool&gt; onChanged;

  void _handleTap() {
    onChanged(!active);
  }

  Widget build(BuildContext context) {
    return GestureDetector(
      onTap: _handleTap,
      child: Container(
        child: Center(
          child: Text(
            active ? 'Active' : 'Inactive',
            style: TextStyle(fontSize: 32.0, color: Colors.white),
          ),
        ),
        width: 200.0,
        height: 200.0,
        decoration: BoxDecoration(
          color: active ? Colors.lightGreen[700] : Colors.grey[600],
        ),
      ),
    );
  }
}</pre>

<aside class="alert alert-success" role="alert">
  <p><i class="far fa-lightbulb"></i> <strong>小提示：</strong>
  When creating API, consider using the <code class="highlighter-rouge">@required</code> annotation for any
  parameters that your code relies on. To use <code class="highlighter-rouge">@required</code>, import the
  <a href="https://api.flutter.dev/flutter/foundation/foundation-library.html">foundation library</a> (which re-exports Dart’s <a href="https://pub.flutter-io.cn/packages/meta">meta.dart</a> library):</p>

  <p><!-- skip --></p>
  <div class="language-dart highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kn">import</span> <span class="s">'package:flutter/foundation.dart'</span><span class="o">;</span>
</code></pre></div>  </div>
</aside>

<hr>

<p><a name="mix-and-match"></a></p>
<h3 id="a-mix-and-match-approach">
<a id="a-mix-and-match-approach" class="anchor" href="#a-mix-and-match-approach" aria-hidden="true"><span class="octicon octicon-link"></span></a>A mix-and-match approach</h3>

<p>For some widgets, a mix-and-match approach makes the most sense. In this
scenario, the stateful widget manages some of the state, and the parent widget
manages other aspects of the state.</p>

<p>In the <code class="highlighter-rouge">TapboxC</code> example, on tap down, a dark green border appears around the
box. On tap up, the border disappears and the box’s color changes. <code class="highlighter-rouge">TapboxC</code>
exports its <code class="highlighter-rouge">_active</code> state to its parent but manages its <code class="highlighter-rouge">_highlight</code> state
internally. This example has two State objects, <code class="highlighter-rouge">_ParentWidgetState</code> and
<code class="highlighter-rouge">_TapboxCState</code>.</p>

<p>The <code class="highlighter-rouge">_ParentWidgetState</code> object:</p>

<ul>
  <li>Manages the <code class="highlighter-rouge">_active</code> state.</li>
  <li>Implements <code class="highlighter-rouge">_handleTapboxChanged()</code>, the method called when the box is tapped.</li>
  <li>Calls <code class="highlighter-rouge">setState()</code> to update the UI when a tap occurs and the <code class="highlighter-rouge">_active</code> state
changes.</li>
</ul>

<p>The <code class="highlighter-rouge">_TapboxCState</code> object:</p>

<ul>
  <li>Manages the <code class="highlighter-rouge">_highlight</code> state.</li>
  <li>The <code class="highlighter-rouge">GestureDetector</code> listens to all tap events. As the user taps down, it adds
the highlight (implemented as a dark green border). As the user releases the
tap, it removes the highlight.</li>
  <li>Calls <code class="highlighter-rouge">setState()</code> to update the UI on tap down, tap up, or tap cancel, and
the <code class="highlighter-rouge">_highlight</code> state changes.</li>
  <li>On a tap event, passes that state change to the parent widget to take
appropriate action using the <a href="https://api.flutter.dev/flutter/widgets/State/widget.html">widget</a> property.</li>
</ul>

<pre class="prettyprint lang-dart">//---------------------------- ParentWidget ----------------------------

class ParentWidget extends StatefulWidget {
  @override
  _ParentWidgetState createState() =&gt; _ParentWidgetState();
}

class _ParentWidgetState extends State&lt;ParentWidget&gt; {
  bool _active = false;

  void _handleTapboxChanged(bool newValue) {
    setState(() {
      _active = newValue;
    });
  }

  @override
  Widget build(BuildContext context) {
    return Container(
      child: TapboxC(
        active: _active,
        onChanged: _handleTapboxChanged,
      ),
    );
  }
}

//----------------------------- TapboxC ------------------------------

class TapboxC extends StatefulWidget {
  TapboxC({Key key, this.active: false, @required this.onChanged})
      : super(key: key);

  final bool active;
  final ValueChanged&lt;bool&gt; onChanged;

  _TapboxCState createState() =&gt; _TapboxCState();
}

class _TapboxCState extends State&lt;TapboxC&gt; {
  bool _highlight = false;

  void _handleTapDown(TapDownDetails details) {
    setState(() {
      _highlight = true;
    });
  }

  void _handleTapUp(TapUpDetails details) {
    setState(() {
      _highlight = false;
    });
  }

  void _handleTapCancel() {
    setState(() {
      _highlight = false;
    });
  }

  void _handleTap() {
    widget.onChanged(!widget.active);
  }

  Widget build(BuildContext context) {
    // This example adds a green border on tap down.
    // On tap up, the square changes to the opposite state.
    return GestureDetector(
      onTapDown: _handleTapDown, // Handle the tap events in the order that
      onTapUp: _handleTapUp, // they occur: down, up, tap, cancel
      onTap: _handleTap,
      onTapCancel: _handleTapCancel,
      child: Container(
        child: Center(
          child: Text(widget.active ? 'Active' : 'Inactive',
              style: TextStyle(fontSize: 32.0, color: Colors.white)),
        ),
        width: 200.0,
        height: 200.0,
        decoration: BoxDecoration(
          color:
              widget.active ? Colors.lightGreen[700] : Colors.grey[600],
          border: _highlight
              ? Border.all(
                  color: Colors.teal[700],
                  width: 10.0,
                )
              : null,
        ),
      ),
    );
  }
}</pre>

<p>An alternate implementation might have exported the highlight state to the
parent while keeping the active state internal, but if you asked someone to use
that tap box, they’d probably complain that it doesn’t make much sense. The
developer cares whether the box is active. The developer probably doesn’t care
how the highlighting is managed, and prefers that the tap box handles those
details.</p>

<hr>

<h2 id="other-interactive-widgets">
<a id="other-interactive-widgets" class="anchor" href="#other-interactive-widgets" aria-hidden="true"><span class="octicon octicon-link"></span></a>Other interactive widgets</h2>

<p>Flutter offers a variety of buttons and similar interactive widgets. Most of
these widgets implement the <a href="https://material-io.cn/design/guidelines-overview">Material Design guidelines</a>, which define a set
of components with an opinionated UI.</p>

<p>If you prefer, you can use <a href="https://api.flutter.dev/flutter/widgets/GestureDetector-class.html">GestureDetector</a> to build interactivity into any
custom widget. You can find examples of GestureDetector in <a href="#managing-state">Managing
state</a>, and in the <a href="https://github.com/flutter/flutter/tree/master/examples/flutter_gallery">Flutter Gallery</a>.</p>

<aside class="alert alert-success" role="alert">
  <p><i class="far fa-lightbulb"></i> <strong>小提示：</strong>
  Flutter also provides a set of iOS-style widgets called <a href="https://api.flutter.dev/flutter/cupertino/cupertino-library.html">Cupertino</a>.</p>
</aside>

<p>When you need interactivity, it’s easiest to use one of the prefabricated
widgets. Here’s a partial list:</p>

<h3 id="standard-widgets">
<a id="standard-widgets" class="anchor" href="#standard-widgets" aria-hidden="true"><span class="octicon octicon-link"></span></a>Standard widgets</h3>

<ul>
  <li><a href="https://api.flutter.dev/flutter/widgets/Form-class.html">Form</a></li>
  <li><a href="https://api.flutter.dev/flutter/widgets/FormField-class.html">FormField</a></li>
</ul>

<h3 id="material-components">
<a id="material-components" class="anchor" href="#material-components" aria-hidden="true"><span class="octicon octicon-link"></span></a>Material Components</h3>

<ul>
  <li><a href="https://api.flutter.dev/flutter/material/Checkbox-class.html">Checkbox</a></li>
  <li><a href="https://api.flutter.dev/flutter/material/DropdownButton-class.html">DropdownButton</a></li>
  <li><a href="https://api.flutter.dev/flutter/material/FlatButton-class.html">FlatButton</a></li>
  <li><a href="https://api.flutter.dev/flutter/material/FloatingActionButton-class.html">FloatingActionButton</a></li>
  <li><a href="https://api.flutter.dev/flutter/material/IconButton-class.html">IconButton</a></li>
  <li><a href="https://api.flutter.dev/flutter/material/Radio-class.html">Radio</a></li>
  <li><a href="https://api.flutter.dev/flutter/material/RaisedButton-class.html">RaisedButton</a></li>
  <li><a href="https://api.flutter.dev/flutter/material/Slider-class.html">Slider</a></li>
  <li><a href="https://api.flutter.dev/flutter/material/Switch-class.html">Switch</a></li>
  <li><a href="https://api.flutter.dev/flutter/material/TextField-class.html">TextField</a></li>
</ul>

<h2 id="resources">
<a id="resources" class="anchor" href="#resources" aria-hidden="true"><span class="octicon octicon-link"></span></a>Resources</h2>

<p>The following resources may help when adding interactivity to your app.</p>

<ul>
  <li>
<a href="/docs/development/ui/widgets-intro#handling-gestures">Gestures</a>, a section in <a href="/docs/development/ui/widgets-intro">Introduction to widgets</a><br>
How to create a button and make it respond to input.</li>
  <li>
<a href="/docs/development/ui/advanced/gestures">Gestures in Flutter</a><br>
A description of Flutter’s gesture mechanism.</li>
  <li>
<a href="https://api.flutter.dev">Flutter API documentation</a><br>
Reference documentation for all of the Flutter libraries.</li>
  <li>
<a href="https://github.com/flutter/flutter/tree/master/examples/flutter_gallery">Flutter Gallery</a><br>
Demo app showcasing many Material Components and other Flutter features.</li>
  <li>
<a href="https://www.youtube.com/watch?v=dkyY9WCGMi0">Flutter’s Layered Design</a> (video)<br>
 This video includes information about state and stateless widgets.
 Presented by Google engineer, Ian Hickson.</li>
</ul>


        
      </div>
    </main>
  </div>
</div>
<footer class="site-footer">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12 site-footer__wrapper">
        <div class="site-footer__logo">
          <img src="/images/flutter-mono-81x100.png" alt="Flutter Logo" width="81" height="100">
        </div>
        <div class="site-footer__content">
          <ul class="site-footer__link-list">
              <li><a href="https://groups.google.com/forum/#!forum/flutter-dev">flutter-dev@</a></li>
              <li><a href="/tos">terms</a></li>
              <li><a href="/security">security</a></li>
              <li><a href="https://www.google.com/intl/en/policies/privacy">privacy</a></li>
              <li><a href="https://flutter-es.io/">español</a></li>
              <li><a href="https://flutter-io.cn" class="text-nowrap">社区中文资源</a></li>
          </ul>

          <p class="licenses" translation-origin="on">
            Except as otherwise noted,
            this work is licensed under a
            <a rel="license" href="https://creativecommons.org/licenses/by/4.0">Creative
            Commons Attribution 4.0 International License</a>,
            and code samples are licensed under the BSD License.
          </p>
          <p class="licenses" translation-result="off">
            除非特别说明，否则本站内容采用 <a rel="license" href="https://creativecommons.org/licenses/by/4.0">CC BY 4.0 授权协议</a>，所有范例代码都采用 BSD 授权协议。
          </p>
        </div>
      </div>
    </div>
  </div>
</footer>


    <!-- <script async="" defer="" src="//survey.g.doubleclick.net/async_survey?site=at3ul57xpub2vk3oxt2ytw365i"></script> -->
  

<script src="/assets/translator/js/translator.js"></script></body></html>